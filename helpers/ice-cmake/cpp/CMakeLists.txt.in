cmake_minimum_required(VERSION 3.1.0)
project(zeroc-mcpp-download NONE)

include(ExternalProject)

ExternalProject_Add(zeroc-mcpp
   GIT_REPOSITORY https://github.com/zeroc-ice/mcpp.git
   GIT_TAG e9ec201de0f395ab4bf4af714d91093138a0c43d
   SOURCE_DIR "${CMAKE_BINARY_DIR}/cpp/zeroc-mcpp/src"
   BINARY_DIR "${CMAKE_BINARY_DIR}/cpp/zeroc-mcpp/build"
   UPDATE_COMMAND ""
   INSTALL_COMMAND ""
)

ExternalProject_Add_Step(zeroc-mcpp copy-cmakelists
   COMMAND "${CMAKE_COMMAND}" -E copy 
      "${CMAKE_SOURCE_DIR}/external/zeroc-mcpp/CMakeLists.txt"
      "${CMAKE_BINARY_DIR}/cpp/zeroc-mcpp/src"
   DEPENDEES download
)